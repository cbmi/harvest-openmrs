var __hasProp={}.hasOwnProperty,__extends=function(t,r){function n(){this.constructor=t}for(var e in r)__hasProp.call(r,e)&&(t[e]=r[e]);return n.prototype=r.prototype,t.prototype=new n,t.__super__=r.prototype,t},__bind=function(t,r){return function(){return t.apply(r,arguments)}};define(["underscore","../core","../constants","../structs","./paginator"],function(t,r,n,e,o){var i,s;return s=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return __extends(e,n),e.prototype.idAttribute="page_num",e.prototype.url=function(){var n;return n=t.result(this.collection,"url"),r.utils.alterUrlParams(n,{page:this.id,per_page:this.collection.perPage})},e}(e.Frame),i=function(e){function o(){return this.fetch=__bind(this.fetch,this),this.markAsDirty=__bind(this.markAsDirty,this),this.onWorkspaceUnload=__bind(this.onWorkspaceUnload,this),this.onWorkspaceLoad=__bind(this.onWorkspaceLoad,this),o.__super__.constructor.apply(this,arguments)}return __extends(o,e),o.prototype.initialize=function(){return this.isDirty=!0,this.isWorkspaceOpen=!1,this._refresh=t.debounce(t.bind(this.refresh,this),n.CLICK_DELAY),r.on(r.VIEW_SYNCED,this.markAsDirty),r.on(r.CONTEXT_SYNCED,this.markAsDirty),this.on("workspace:load",this.onWorkspaceLoad),this.on("workspace:unload",this.onWorkspaceUnload)},o.prototype.onWorkspaceLoad=function(){return this.isWorkspaceOpen=!0,this._refresh()},o.prototype.onWorkspaceUnload=function(){return this.isWorkspaceOpen=!1},o.prototype.markAsDirty=function(){return this.isDirty=!0,this._refresh()},o.prototype.fetch=function(t){var n;return null==t&&(t={}),null!=(n=r.config.get("session.defaults.data.preview"))&&(t.type="POST",t.contentType="application/json",t.data=JSON.stringify(n)),this.isDirty&&this.isWorkspaceOpen?(this.isDirty=!1,null==t.cache&&(t.cache=!1),o.__super__.fetch.call(this,t)):{done:function(t){return function(){return delete t.pending}}(this)}},o}(e.FrameArray),t.extend(i.prototype,o.PaginatorMixin),i.prototype.model=s,{Results:i}});
//# sourceMappingURL=results.js.map