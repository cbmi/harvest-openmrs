var __hasProp={}.hasOwnProperty,__extends=function(t,e){function n(){this.constructor=t}for(var r in e)__hasProp.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};define(["underscore","backbone","../core","./base","./stats"],function(t,e,n,r,s){var i,o,u;return u=function(t){var e;return(e=n.config.get("fields.instances."+t.id+".type"))?e:null!=t.logical_type?t.logical_type:(e=t.simple_type,t.enumerable||"boolean"===e?"choice":e)},o=function(t){function n(){n.__super__.constructor.apply(this,arguments),this.links.stats&&(this.stats=new s.StatCollection,this.stats.url=function(t){return function(){return t.links.stats}}(this))}return __extends(n,t),n.prototype.parse=function(){var t;return this._cache={},t=n.__super__.parse.apply(this,arguments),t.type=u(t),t},n.prototype.distribution=function(t,n){null==n&&(n=!0),null==this.links.distribution&&t(),n&&null!=this._cache.distribution?t(this._cache.distribution):e.ajax({url:this.links.distribution,dataType:"json",success:function(e){return function(r){return e._cache.distribution=n?r:null,t(r)}}(this)})},n.prototype.values=function(t,n,r){var s;return null==r&&(r=!0),"function"==typeof t?(n=t,r=n,t={}):t&&(r=!1,"string"==typeof t&&(t={query:t})),null==this.links.values&&n(),s=e.$.Deferred(),n&&s.done(n),r&&null!=this._cache.values?s.resolve(this._cache.values):e.ajax({url:this.links.values,data:t,dataType:"json",success:function(t){return function(e){return r&&(t._cache.values=e),s.resolve(e)}}(this),error:function(){return function(){return s.reject()}}(this)}),s.promise()},n}(r.Model),i=function(n){function r(){return r.__super__.constructor.apply(this,arguments)}return __extends(r,n),r.prototype.model=o,r.prototype.search=function(n,r){return e.ajax({url:t.result(this,"url"),data:{query:n},dataType:"json",success:function(t){return r(t)}})},r}(r.Collection),{FieldModel:o,FieldCollection:i}});
//# sourceMappingURL=field.js.map